<!doctype html>
<html lang=en>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RaspiMote ─ documentation</title>
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link href="css/nutino-sans.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style1.css">
    <link rel="stylesheet" href="css/style2.css">
    <link rel="icon" type="image/x-icon" href="img/RaspiMote_logo.ico"/>
    <link rel="shortcut icon" type="image/x-icon" href="img/RaspiMote_logo.ico"/>
  </head>
  <body>
    <div class="doc__bg"></div>
    <nav class="header">
      <img src="img/RaspiMote_logo_500px.png" class="logo_img">
      <h1 class="logo">Raspimote <span class="logo__thin">Documentation</span></h1>
      <ul class="menu">
        <div class="menu__item toggle"><span></span></div>
        <li class="menu__item"><a href="https://github.com/RaspiMote/RaspiMote" target="_blank"
           class="link link--dark"><i class="fa fa-github"></i> Github</a></li>
        <li class="menu__item"><a href="https://raspimote.tk/" class="link link--dark"><i class="fa fa-home"></i> Home</a></li>
      </ul>
    </nav>
    <div class="wrapper">
      <aside class="doc__nav">
        <ul>
          <li class="js-btn selected">Description</li>
          <li class="js-btn">Getting started</li>
          <li class="js-btn">Basic setup</li>
          <li class="js-btn">Running</li>
          <li class="js-btn">Creating custom functions</li>
        </ul>
      </aside>
      <article class="doc__content">
        <section class="js-section">
          <h3 class="section__title">Description</h3>
          

          <p>
            You want to turn your Raspberry Pi into a programmable keyboard / controller / remote control? RaspiMote is what you need!
        </p>
        <p>
            In this documentation, you will learn to install RaspiMote on your Raspberry Pi (we recommend using a Raspberry Pi Zero W / WH) and the driver to configure and use it <text title="macOS is not supported yet, but we definitely want to support it in the future!">on your computer running Windows or Linux</text>.
        </p>
      </section>
        <section class="js-section">

        <h3 class="section__title">Getting started</h3>

        <p>
            To install RaspiMote on your PC, transfer the <code class="micro_code">pi</code> folder to your Raspberry Pi and the <code class="micro_code">driver</code> folder to your computer, then you can run the provided scripts:
        </p>

        <ul>
            <li><code class="micro_code">win_install.cmd</code> for Windows;</li>
            <li><code class="micro_code">deb_install.sh</code> for Debian-based Linux distributions (and then follow the part <a href="#post_inst_deb">Debian post-install</a>);</li>
        </ul>

        <h4 id="post_inst_deb">Debian post-install</h4>

        <p>On Debian-based systems, you should additionnaly add our certification authority to your trusted certification authorities on your web browser (it's automatically done by the installation script on Windows).</p>

        <p>This will allow you to use our web-based configuration UI. Else, it won't be able to send any requests to the driver server.</p>

        <p>Not adding our certification authority means that the browser will encounter the following error each time you are trying to modify something. But this error message wouldn't even be prompted to you, as it happens in the background of the UI. It would simply fail!</p>

        <img src="img/CA_not_trusted.png" class="in_text_img" alt="Here, our CA is not trusted." title="Here, our CA is not trusted."/>

        <p>However, if you add our certification authority, the browser will “trust” our driver, just like in the following example:</p>

        <img src="img/CA_trusted.png" class="in_text_img" alt="Here, our CA is trusted." title="Here, our CA is trusted."/>

        <h5>Chrome / Chromium / Brave</h5>

        <p>On Chrome / Chromium / Brave, navigate to <a href="chrome://settings/certificates">chrome://settings/certificates</a>. The following page should display:</p>

        <img src="img/Chrome_certs.png" class="in_text_img" alt="Chrome / Chromium ─ “Manage certificates”" title="Chrome / Chromium ─ “Manage certificates”"/>

        <p>Once you are there, click on “Authorities” and then on “Import”. On your home folder (<code class="micro_code">~</code> / <code class="micro_code">/home/username</code>), you should find the file <code class="micro_code">raspimote_ca.pem</code> (only if you have already executed the installation script!). Select this file.</p>

        <p>This window should display:</p>

        <img src="img/Chrome_add_CA.png" class="in_text_img" alt="Chrome / Chromium ─ “Add a CA”" title="Chrome / Chromium ─ “Add a CA”"/>

        <p>Simply tick the checkbox “Trust this certificate for identifying websites” and click “OK”.</p>

        <p>Our certification authority (“RaspiMote certification authority”) should appear in the list, under “org-RaspiMote”, as shown below.</p>

        <img src="img/Chrome_RSP_CA.png" class="in_text_img" alt="Chrome / Chromium ─ RaspiMote certification authority added" title="Chrome / Chromium ─ RaspiMote certification authority added"/>

        <h5>Firefox</h5>

        <p>On Firefox, navigate to <a href="about:preferences#privacy">about:preferences#privacy</a>. In the part called “Certificates”, click on “View <u>C</u>ertificates...”</p>

        <p>This window should display:</p>

        <img src="img/Firefox_cert_manager.png" class="in_text_img" alt="Firefox ─ “Certificate manager”" title="Firefox ─ “Certificate manager”"/>

        <p>Make sure you are on the tab “Authorities” (it should be the one displayed by default) and click on “Import”. On your home folder (<code class="micro_code">~</code> / <code class="micro_code">/home/username</code>), you should find the file <code class="micro_code">raspimote_ca.pem</code> (only if you have already executed the installation script!). Select this file.</p>

        <p>This window should display:</p>

        <img src="img/Firefox_add_CA.png" class="in_text_img" alt="Firefox ─ “Add a CA”" title="Firefox ─ “Add a CA”"/>

        <p>Simply tick the checkbox “Trust this CA to identify websites” and click “OK”.</p>

        <p>Our certification authority (“RaspiMote certification authority”) should appear in the list, under “RaspiMote”, as shown below.</p>

        <img src="img/Firefox_RSP_CA.png" class="in_text_img" alt="Firefox ─ RaspiMote certification authority added" title="Firefox ─ RaspiMote certification authority added"/>

            </pre>
          </section>
          <section class="js-section">
            <h3 class="section__title">Basic setup</h3>

            <p>
              The main purpose of RaspiMote is to allow you to create your own functions that will fit your needs (for provided functions, see <a href="#builtinfunct">Built-in functions</a>).<br/>
              The process is divided in two parts:
          </p>
  
          <ul>
              <li>writing Pi's code to add your inputs;</li>
              <li>writing driver's code to connect those inputs to functions.</li>
          </ul>
  
          <h4>&nbsp;&nbsp; Pi</h4>
          <p>
              You will need to customise your RaspiMote Pi script to add your physical inputs.<br>The <code>Pi</code> class comes with some premade input methods (check methods' docstring to see the parameters) :
          </p>
          <ul>
              <li>buttons;</li>
              <li>USB HID devices (keyboards, mice);</li>
              <li>Analog Digital Converters (ADC).</li>
          </ul>
  
          <p>
              When creating the <code class="micro_code">Pi</code> object, you can add a configuration dictionary, see the following example:
          </p>
  
          <code class="micro_code">
              pi = Pi([<br/>
                  &nbsp; {"pin": "21", "type_input": "button"},<br/>
                  &nbsp; {"pin": "20", "type_input": "button"},<br/>
                  &nbsp; {"pin": "16", "type_input": "button"},<br/>
                  &nbsp; {"pin": "6", "type_input": "button"},<br/>
                  &nbsp; {"pin": "13", "type_input": "button"},<br/>
                  &nbsp; {"pin": "19", "type_input": "button"},<br/>
                  &nbsp; {"pin": "26", "type_input": "button"},<br/>
              ])
          </code>
  
          <p>
              This only works for buttons for the moment.<br>If you want to add USB and ADC devices, use the dedicated methods with this code (this is only an example):
          </p>
  
          <code class="micro_code">
              pi.add_ADC_Device_PCF8591(2)<br/>
              pi.add_USB_Device(1)<br/>
              pi.add_USB_Device(4)
          </code>
  
          <h4>&nbsp;&nbsp; Driver</h4>
          <p>
              After having added your inputs to the Raspberry Pi, you need to decide what they will do on your PC. You must customise <code class="micro_code">./driver/lan_server/command_processor.py</code>, in <code class="micro_code">parse_data()</code> function, you can write your code. See <a href="#builtinfunct">Built-in functions</a> section to see what features are available or write your own ones.
          </p>
          <p>
              Example of a USB keyboard that writes mathematical symbols:
          </p>

          <div class="code__block code__block--notabs">
            <pre class="code code--block">
              <code>
                key_to_char = {
                  &nbsp; <marron>"KEY_Q"</marron>: <marron>"α"</marron>,
                  &nbsp; <marron>"KEY_W"</marron>: <marron>"β"</marron>,
                  &nbsp; <marron>"KEY_E"</marron>: <marron>"π"</marron>,
                  &nbsp; <marron>"KEY_R"</marron>: <marron>"ω"</marron>,
                  &nbsp; <marron>"KEY_T"</marron>: <marron>"Δ"</marron>,
                  &nbsp; <marron>"KEY_Y"</marron>: <marron>"≈"</marron>,
                  &nbsp; <marron>"KEY_U"</marron>: <marron>"√"</marron>,
                  &nbsp; <marron>"KEY_I"</marron>: <marron>"∞"</marron>,
                  &nbsp; <marron>"KEY_O"</marron>: <marron>"≠"</marron>,
              }
              

            <violet>if</violet> type_device == <marron>"USB"</marron> and pin == <lgreen>4</lgreen> and <blgreen>int</blgreen>(extra) == <lgreen>1</lgreen>:
            &nbsp;&nbsp;&nbsp; <violet>if</violet> value <blue>in</blue> key_to_char:
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type_text(key_to_char[value])
      </code>
    </pre>
  </div>

        <h4 id="builtinfunct">&nbsp;&nbsp; Built-in functions</h4>

        <p>
            With these functions, you can already perform multiple actions but don't forget to check the function's docstring :
        </p>

        <ul>
            <li>simulate keystroke and key combinaison (any character and function key);</li>
            <li>change sound level;</li>
            <li>etc...</li>
        </ul>




          </section>


          <section class="js-section">

            <h3 class="section__title">Running</h3>


            <h4>Pi</h4>
            <p>
                Before the system runs, you need to execute <code class="micro_code">pi.establish_connection(server_IP)</code> to initiate connection</code>.
            </p>
        
            <h4>Driver</h4>
              <p>After the Pi executed <code class="micro_code">pi.establish_connection(server_IP)</code>, you can start the driver and after it executed <code class="micro_code">driver.run()</code>, it should process your Pi's requests.</b></p>


          </section>


          <section class="js-section">

            <h3 class="section__title">Creating custom functions</h3>

            <p>You can create your own custom functions modifying the file <code class=micro_code>custom_actions.py</code> in <code class=micro_code>/usr/bin/RaspiMote/driver/driver/lan_server/custom_fcn</code> (Linux) or <code class=micro_code>C:\Program&nbsp;Files\RaspiMote\driver\driver\lan_server\custom_fcn</code> (Windows).</p>

            <p>For example, this function will open an alert box when triggered:</p>

            <div class="code__block code__block--notabs">
              <pre class="code code--block">
                <code>
                  <violet>import</violet> pyautogui&nbsp; <green># This line imports the "pyautogui" module, useful to open dialogboxes.</green>

                  <blue>def</blue> <yellow>alert</yellow>():
                  &nbsp;&nbsp;&nbsp; pyautogui.alert(<marron>"You just made a custom function!"</marron>, <marron>"Wow!"</marron>)&nbsp; <green># This line opens an alert box.</green>
                </code>
              </pre>
            </div>

            <p>Once the above function is linked to a button, pressing the button will open this alert box:</p>
            
            <img src="img/pyautogui_example.png" title="The messagebox generated with the code above." alt="The messagebox generated with the code above." class="in_text_img"/>

            <p>This is, of course, a very simple (and boring) example. Much complex and interesting things can be made; your imagination is the only limit!</p>

            <p>If the function is dedicated to a GPIO button, no argument is passed. However, if the function is dedicated to an ADC device (potentiometer, joystick), the position of the knob / axis, in percents, is the only argument passed. You can add extra arguments to the function, after the required one(s), if there is any.</p>

            <p>To associate the function with a button, simply use the web-based configuration UI.</p>

            <p>For example, the following configuration, once saved, will associate the button plugged on <code class="micro_code">GPIO 13</code> with the function <code class="micro_code">alert()</code>:</p>

            <img src="img/conf_alert_example.png" title="Configuration to run the function “alert()” with “GPIO 13”." alt="Configuration to run the function “alert()” with “GPIO 13”." class="in_text_img"/>

          </section>


      </article>
    </div>

    <script src="js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="js/js.js"></script>
  </body>
</html>