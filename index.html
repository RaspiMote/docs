<!DOCTYPE html>
<html lang=en>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="The documentation of the RaspiMote project, which aims at turning a Raspberry Pi into a programmable keyboard / controller / remote control...">
    <meta name="keywords" content="raspimote,raspberry,pi,raspberry pi,keyboard,controller,remote,deck,button,potentiometer,key,documentation,docs"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RaspiMote ─ documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,400,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" href="css/style1.css">
    <link rel="stylesheet" href="css/style2.css">
    <link rel="icon" type="image/x-icon" href="img/RaspiMote_logo.ico"/>
    <link rel="shortcut icon" type="image/x-icon" href="img/RaspiMote_logo.ico"/>
  </head>
  <body>
    <div class="doc__bg"></div>
    <nav class="header">
      <img src="img/RaspiMote_logo_500px.png" class="logo_img">
      <h1 class="logo">Raspimote <span class="logo__thin">Documentation</span></h1>
      <ul class="menu">
        <div class="menu__item toggle"><span></span></div>
        <li class="menu__item"><a href="https://github.com/RaspiMote/RaspiMote" target="_blank"
           class="link link--dark"><i class="fa fa-github"></i> Github</a></li>
        <li class="menu__item"><a href="https://raspimote.tk/" class="link link--dark"><i class="fa fa-home"></i> Home</a></li>
      </ul>
    </nav>
    <div class="wrapper">
      <aside class="doc__nav">
        <ul>
          <li class="js-btn selected">Description</li>
          <li class="js-btn">Getting started</li>
          <li class="js-btn">Basic setup on the Pi</li>
          <li class="js-btn">Running</li>
          <li class="js-btn">Creating custom functions</li>
        </ul>
      </aside>
      <article class="doc__content">
        <section class="js-section">
          <h3 class="section__title">Description</h3>


          <p>
            Do you want to turn your Raspberry Pi into a programmable keyboard / controller / remote control? RaspiMote is what you need!
        </p>
        <p>
            In this documentation, you will learn to install RaspiMote on your Raspberry Pi (we recommend using a Raspberry Pi Zero W / WH) and the driver to configure and use it <text title="macOS is not supported yet, but we definitely want to support it in the future!">on your computer running Windows or Linux</text>.
        </p>
      </section>
        <section class="js-section">

        <h3 class="section__title">Getting started</h3>

        <p>
            To install RaspiMote on your PC, transfer the <code class="micro_code">pi</code> folder to your Raspberry Pi and the <code class="micro_code">driver</code> folder to your computer, then you can run the provided scripts:
        </p>

        <ul>
            <li><code class="micro_code">win_install.cmd</code> for Windows (Windows 10 version 1706 or more is required);</li>
            <li>On Windows, you can alternatively use our “one-line installer”: in an elevated command prompt, simply type:
              <div class="code__block code__block--notabs">
                <pre class="code code--block">
                  <code>
                    <grey>> </grey>curl -Lso install.cmd raspimote.tk/w && install.cmd
                  </code>
                </pre>
              </div>
            ;</li>
            <!--<li><code class="micro_code">deb_install.sh</code> for Debian-based Linux distributions (and then follow the part <a href="#post_inst_deb">Debian post-install</a>).</li>-->
        </ul>

        <p>
          If you are running an older build of Windows, follow <a href="#man_inst_win">Manual installation on Windows</a>.
        </p>

        <p>
          macOS is not supported for the moment, but it may be made compatible in the future.
        </p>

        <h4 id="post_inst_deb">Debian post-install</h4>

        <p>On Debian-based systems, you should additionnaly add our certification authority to your trusted certification authorities on your web browser (it is automatically done by the installation script on Windows).</p>

        <p>This will allow you to use our web-based configuration UI. Else, it will not be able to send any requests to the driver server.</p>

        <p>Not adding our certification authority means that the browser will encounter the following error each time you are trying to modify something. But this error message would not even be prompted to you, as it happens in the background of the UI. It would simply fail!</p>

        <img src="img/CA_not_trusted.png" class="in_text_img" alt="Here, our CA is not trusted." title="Here, our CA is not trusted."/>

        <p>However, if you add our certification authority, the browser will “trust” our driver, just like in the following example:</p>

        <img src="img/CA_trusted.png" class="in_text_img" alt="Here, our CA is trusted." title="Here, our CA is trusted."/>

        <h5>Chrome / Chromium / Brave</h5>

        <p>On Chrome / Chromium / Brave, navigate to <a href="chrome://settings/certificates">chrome://settings/certificates</a>. The following page should display:</p>

        <img src="img/Chrome_certs.png" class="in_text_img" alt="Chrome / Chromium ─ “Manage certificates”" title="Chrome / Chromium ─ “Manage certificates”"/>

        <p>Once you are there, click on “Authorities” and then on “Import”. On your home folder (<code class="micro_code">~</code> / <code class="micro_code">/home/username</code>), you should find the file <code class="micro_code">raspimote_ca.pem</code> (only if you have already executed the installation script!). Select this file.</p>

        <p>This window should display:</p>

        <img src="img/Chrome_add_CA.png" class="in_text_img" alt="Chrome / Chromium ─ “Add a CA”" title="Chrome / Chromium ─ “Add a CA”"/>

        <p>Simply tick the checkbox “Trust this certificate for identifying websites” and click “OK”.</p>

        <p>Our certification authority (“RaspiMote certification authority”) should appear in the list, under “org-RaspiMote”, as shown below.</p>

        <img src="img/Chrome_RSP_CA.png" class="in_text_img" alt="Chrome / Chromium ─ RaspiMote certification authority added" title="Chrome / Chromium ─ RaspiMote certification authority added"/>

        <h5>Firefox</h5>

        <p>On Firefox, navigate to <a href="about:preferences#privacy">about:preferences#privacy</a>. In the part called “Certificates”, click on “View <u>C</u>ertificates...”</p>

        <p>This window should display:</p>

        <img src="img/Firefox_cert_manager.png" class="in_text_img" alt="Firefox ─ “Certificate manager”" title="Firefox ─ “Certificate manager”"/>

        <p>Make sure you are on the tab “Authorities” (it should be the one displayed by default) and click on “Import”. On your home folder (<code class="micro_code">~</code> / <code class="micro_code">/home/username</code>), you should find the file <code class="micro_code">raspimote_ca.pem</code> (only if you have already executed the installation script!). Select this file.</p>

        <p>This window should display:</p>

        <img src="img/Firefox_add_CA.png" class="in_text_img" alt="Firefox ─ “Add a CA”" title="Firefox ─ “Add a CA”"/>

        <p>Simply tick the checkbox “Trust this CA to identify websites” and click “OK”.</p>

        <p>Our certification authority (“RaspiMote certification authority”) should appear in the list, under “RaspiMote”, as shown below.</p>

        <img src="img/Firefox_RSP_CA.png" class="in_text_img" alt="Firefox ─ RaspiMote certification authority added" title="Firefox ─ RaspiMote certification authority added"/>


        <h4 id="man_inst_win">Manual installation on Windows</h4>

        <p>
          This guide is going to show you how to install RaspiMote manually on Windows, in case your computer does not run a version of the operating system compatible with the automated installer or in case the automated installer fails. Instructions for Linux are coming soon.
        </p>

        <h5>Step 1: Download required files</h5>

        <p>
          First, download all the necessary files. You will need:
          <ul>
            <li>an embeddable installation of Python if you are running RaspiMote on Windows Vista or later (if you are running Windows 8.1 or 10, download Python embeddable package 3.9.2 for <a href="https://www.python.org/ftp/python/3.9.2/python-3.9.2-embed-win32.zip">32 bits</a> or <a href="https://www.python.org/ftp/python/3.9.2/python-3.9.2-embed-amd64.zip">64 bits</a> CPU, according to yours; if you are running Windows Vista or 7, download Python embeddable package 3.7.9 for <a href="https://www.python.org/ftp/python/3.7.9/python-3.7.9-embed-win32.zip">32 bits</a> or <a href="https://www.python.org/ftp/python/3.7.9/python-3.7.9-embed-amd64.zip">64 bits</a> CPU, according to yours);
            <li>the source code of RaspiMote (you can download it as a .zip file on the <a href="https://github.com/RaspiMote/RaspiMote/releases/latest" target="_blank">latest release page</a>);</li>
            <li>a tiny Python script editor called “IDLE”, that you can download <a href="https://github.com/RaspiMote/bin/releases/download/1.0.0_bin/idle-windows-python39.zip">following this link</a> for Windows 8.1 or 10, or <a href="https://github.com/RaspiMote/bin/releases/download/1.0.0_bin/idle-windows-python37.zip">following this link</a> for Windows Vista or 7;</li>
            <li>the “entrypoint binaries” (you can download them on the <a href="https://github.com/RaspiMote/bin/releases/latest" target="_blank">latest release page of “RaspiMote/bin”</a>, according to your CPU architecture (<code class="micro_code">run-windows-****-****.exe</code> and <code class="micro_code">ui-windows-****-****.exe</code>);</li>
            <li>the script to install “pip”, Python’s package manager, that you can download <a href="https://bootstrap.pypa.io/get-pip.py" target="_blank">following this link</a>;</li>
            <li>the source code of “RaspiMote/https”, that you can download <a href="https://github.com/RaspiMote/https/archive/refs/tags/1.0.0.zip">following this link</a>.</li>
          </ul>
        </p>

        <h5>Step 2: Copy files</h5>

        <p>
          You have to copy several files out of what you have downloaded.
          <ul>
            <li>
              Copy all the contents of embeddable Python to <code class="micro_code">C:\Program Files\RaspiMote\py</code>.
            </li>
            <li>
              In the source code of RaspiMote:
              <ul>
                <li>copy the folder <code class="micro_code">driver</code> (the folder itself, not its content) to <code class="micro_code">C:\Program Files\RaspiMote</code>;</li>
                <li>from the <code class="micro_code">install</code> folder, copy <code class="micro_code">win_install.cmd</code> and <code class="micro_code">win_uninstall.cmd</code> to <code class="micro_code">C:\Program Files\RaspiMote</code>, and rename them respectively <code class="micro_code">install.cmd</code> and <code class="micro_code">rm.cmd</code>;</li>
                <li>from the <code class="micro_code">install/win_assets</code> folder, copy <code class="micro_code">init.cmd</code> to <code class="micro_code">C:\Program Files\RaspiMote</code>, <code class="micro_code">uninstaller_entrypoint.cmd</code> to <code class="micro_code">C:\Program Files\RaspiMote</code>, and rename it to <code class="micro_code">uninstall.cmd</code>, <code class="micro_code">python39._pth</code> to <code class="micro_code">C:\Program Files\RaspiMote\py</code> (replace the already existing file), and copy <code class="micro_code">reg_registration.cmd</code> to somewhere safe — like your desktop;
                  <ul><li>
                    <i><u>Note:</u> if you are using Python 3.7.9 (in case you are running Windows Vista or 7), you should additionnally rename <code class="micro_code">python39._pth</code> to <code class="micro_code">python37._pth</code> before copying it. You should also open the file with a text editor such as “<a href="https://notepad-plus-plus.org/" target="_blank">Notepad++</a>” and replace “python39.zip” by “python37.zip”.</i>
                  </li></ul>
                </li>
                <li>If you plan to use “<a href="https://www.mozilla.org/en-US/firefox/" target="_blank">Mozilla Firefox</a>” to access the web-based configuration UI, you shoud aldso copy <code class="micro_code">install/win_assets/policies.json</code> to <code class="micro_code">$FIREFOX_PATH\distribution</code>, <code class="micro_code">$FIREFOX_PATH</code> being the folder on which Mozilla Firefox is installed.</li>
                <li>from the <code class="micro_code">install/common_assets</code> folder, copy <code class="micro_code">custom_fcn.py</code> to <code class="micro_code">C:\Users\%USERNAME%\AppData\Roaming\RaspiMote\custom_fcn</code> (create all the necessary folders), <code class="micro_code">raspimote_ca.pem</code> to somewhere safe — like your desktop — and install the fonts <code class="micro_code">Open_Sans_bold.ttf</code> and <code class="micro_code">Open_Sans_regular.ttf</code>.
              </ul>
            </li>
            <li>Copy all the contents of the .zip file containing “IDLE” to <code class="micro_code">C:\Program Files\RaspiMote\py</code>. If you are asked whether or not to merge folders, merge them.</li>
            <li>Copy each of the “entrypoint binaries” to <code class="micro_code">C:\Program Files\RaspiMote</code>, and rename <code class="micro_code">run-windows-****-****.exe</code> to <code class="micro_code">RaspiMote.exe</code> and <code class="micro_code">ui-windows-****-****.exe</code> to <code class="micro_code">RaspiMote_UI.exe</code>.</li>
            <li>Copy the folder inside the zipped release of “RaspiMote/https” to somewhere safe — like your desktop.</li>
          </ul>
        </p>

        <h5>Step 3: Installing dependencies</h5>

        <p>
          To install the dependencies, open an elevated command prompt in the folder on which you downloaded all the files in <i>Step 1</i> and type:
          <div class="code__block code__block--notabs">
            <pre class="code code--block">
              <code>
                <grey>> </grey>"C:\Program Files\RaspiMote\py\python.exe" get-pip.py
              </code>
            </pre class="code code--block">
          </div class="code__block code__block--notabs">
        </p>
        <p>
          Once the process is over, type the following command:
          <div class="code__block code__block--notabs">
            <pre class="code code--block">
              <code>
                <grey>> </grey>"C:\Program Files\RaspiMote\py\python.exe" -m pip install urllib3 requests flask flask-cors keyboard psutil jaraco.functools
              </code>
            </pre class="code code--block">
          </div class="code__block code__block--notabs">
        </p>
        <p>
          Then, open an elevated command prompt in the folder you extracted from the “RaspiMote/https” archive and type:
          <div class="code__block code__block--notabs">
            <pre class="code code--block">
              <code>
                <grey>> </grey>"C:\Program Files\RaspiMote\py\python.exe" setup.py install
              </code>
            </pre class="code code--block">
          </div class="code__block code__block--notabs">
        </p>

        <h5>Step 4: additionnal steps</h5>

        <p>
          A few additionnal steps are required:
          <ul>
            <li>
              First, you have to install our certification authority, so you will be able to use our web-based configuration UI:
              <ul>
                <li>open the “Microsoft Management Console”, by typing <code class="micro_code">mmc</code> in the “Win + R” “Run” menu;</li>
                <li>in the “File” menu, click on “Add/Remove snap-in”;</li>
                <li>double-click on “Certificates” and press “OK”;</li>
                <li>select “Local computer” and “Finish”;</li>
                <li>in the right panel, navigate to <code class="micro_code">Certificates (Local Computer) \ Trusted Root Certification Authorities</code>;</li>
                <li>right click “Trusted Root Certification Authorities”, click “All taks” and “Import...”;</li>
                <li>click “Next” and then “Browse...”</li>
                <li>on the dropdown menu next to “File name”, select “All files”;</li>
                <li>select <code class="micro_code">raspimote_ca.pem</code>, that you are supposed to have downloaded and extracted earlier;</li>
                <li>click “Next”, “Next”, and “Finish”.</li>
              </ul>
            </li>
          </ul>
        </p>


          </section>
          <section class="js-section">
            <h3 class="section__title">Basic setup on the Pi</h3>

            <p>
              The main purpose of RaspiMote is to allow you to create your own functions that will fit your needs (for provided functions, see <a href="#builtinfunct">Built-in functions</a>).<br/>
              We will see a few examples of configurations that you can easily test with your Raspberry Pi.
          </p>

          <h4>&nbsp;&nbsp; Created The Pi object</h4>
          <p>
            Your main.py file must start by creating a Pi() object wich take a few parameters :
            <code class="micro_code">pi = Pi(IP_ADDRESS, CONNECTION_MODE, VERBOSE)</code>

            <ul>
                <li><code class="micro_code">IP_ADDRESS</code> is your computer’s IP address;</li>
                <li><code class="micro_code">CONNECTION_MODE</code> is the connection mode that you will be using (only Wi-Fi for the moment)</li>
                <li><code class="micro_code">VERBOSE</code> can be set to True to see verbose messages (you might want to use it when writing your main.py file)</li>
            </ul>


          </p>

          <h4>&nbsp;&nbsp; Adding Input Devices</h4>
          <p>
              The Pi class comes with a set of basic devices that you can add just by calling the method. Those methods are listed in the section (link) below.
          </p>
          <ul>
              <li>GPIO buttons;</li>
              <li>USB devices (keyboards, mice);</li>
              <li>USB Controllers (tested with xbox one controllers)</li>
          </ul>

          <h4>&nbsp;&nbsp; GPIO Buttons</h4>

          <p>
            You can several buttons connected to the Raspbery Pi GPIO pins by calling <code class="micro_code">add_buttons(BUTTONS_CONFIGURATION)</code>.
            <code class="micro_code">BUTTONS_CONFIGURATION</code> must be of the following form : <br/>
            <div class="code__block code__block--notabs">
              <pre class="code code--block">
                <code>
                [
                    &nbsp; {"pin": "21", "type_input": "button"},
                    &nbsp; {"pin": "20", "type_input": "button"},
                    &nbsp; {"pin": "16", "type_input": "button"},
                    &nbsp; {"pin": "6", "type_input": "button"},
                    &nbsp; {"pin": "13", "type_input": "button"},
                    &nbsp; {"pin": "19", "type_input": "button"},
                    &nbsp; {"pin": "26", "type_input": "button"},
                ]
                </code>
              </pre class="code code--block">
              </div class="code__block code__block--notabs">
        </p>

        <h4>&nbsp;&nbsp; USB devices</h4>
          <p>
              <code class="micro_code">Pi</code> class has special support for mice and keyboards. But you can still use the <code class="micro_code">add_generic_USB_device()</code> that supports any kind of USB device.
              All of thoses methods takes an integer as parameter. You can find which number you must pass by running the <code class="micro_code">identify_usb_device.py</code> script located in the <code class="micro_code">utility/</code> folder.
          </p>

          <h5>&nbsp;&nbsp; USB Mice</h5>
          <p>
            The <code class="micro_code">add_USB_mouse(INPUT_NUMBER)</code> adds the specified mouse to be listened to. This means that its buttons, scroll wheel and any movements will be sent to the driver.
          </p>

          <h5>&nbsp;&nbsp; USB Keyboards</h5>
          <p>
            The <code class="micro_code">add_USB_keyboard(INPUT_NUMBER)</code> adds the specified keyboard to be listened to. This means that its keys will be listened to and every events will be sent to the driver (hit, long press, release).
          </p>

          <h5>&nbsp;&nbsp; Generic USB devices</h5>
          <p>
            The <code class="micro_code">generic_usb_device_loop(INPUT_NUMBER, NAME)</code> adds the specified USB device to be listened to. As it is a generic device, you must pass a string to identify it in requests to the driver.


        <h4>&nbsp;&nbsp; USB Controllers</h4>
          <p>
            You can add one or multiple USB Controllers by using the <code class="micro_code">add_gamepad_device()</code> for each controller.
          </p>

        <h4>&nbsp;&nbsp; Code example</h4>

        <div class="code__block code__block--notabs">
         <pre class="code code--block">
           <code>
               &nbsp; <violet>from</violet> pi.pi <violet>import</violet> Pi

               &nbsp; verbose = <blue>True</blue>
               &nbsp; pi = Pi(<marron>"192.168.1.16"</marron>, <marron>"WiFi"</marron>, verbose)
               &nbsp; pi.add_buttons_configuration([{<marron>"pin"</marron>: <marron>"21"</marron>, <marron>"type_input"</marron>: <marron>"button"</marron>}, {<marron>"pin"</marron>: <marron>"20"</marron>, <marron>"type_input"</marron>: <marron>"button"</marron>}]
               &nbsp; pi.add_USB_keyboard(<lgreen>0</lgreen>)
               &nbsp; pi.add_gamepad_device()
               &nbsp; pi.add_gamepad_device()
               &nbsp; pi.establish_connection() <green># More details in the “Running” section.</green>
         </code>
       </pre>
      </div>



          </section>

          <section class="js-section">

            <h3 class="section__title">Running</h3>


            <h4>Pi</h4>
            <p>
                Before the system runs, you need to execute <code class="micro_code">pi.establish_connection(server_IP)</code> at the end of your to initiate the connection</code>.
            </p>

            <h4>Request form (information)</h4>

            <p>
              Here are, for information purpose, the requests forms that the <code class="micro_code">Pi</code> class sends to your driver for the provided devices.
            </p>

            <table style="width: 100%;">
              <thead style="text-align: center;">
                <tr>
                  <td>Origin</td>
                  <td>Request Form</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Buttons</td>
                  <td><code class="micro_code">{"code": [code], request": type": "button", id": "gpio_pin"", event_type": "button_event", value": 1}</code></td>
                </tr>
                <tr>
                  <td>ADC</td>
                  <td><code class="micro_code">{"code": [code], request": type": "ADC", id": [channel], event_type": "adc_event", value": [value]}</code></td>
                </tr>
                <tr>
                  <td>USB Mouse</td>
                  <td><code class="micro_code">{"code": [code], request": type": "USB", id": "mouse_[id]", event_type": [type], value": [value]}</code></td>
                </tr>
                <tr>
                  <td>USB Keyboard</td>
                  <td><code class="micro_code">{"code": [code], request": type": "USB", id": "keyboard_[id]", event_type": [key], value": [value]}</code></td>
                </tr>
                <tr>
                  <td>Generic USB</td>
                  <td><code class="micro_code">{"code": [code], request": type": "USB", id": "generic_usb_[device_name]", event_type": [data_type], value": [value]}</code></td>
                </tr>
                <tr>
                  <td>USB Controller</td>
                  <td><code class="micro_code">{"code": [code], request": type": "gamepad", id": [id], event_type": [type], value": [value]}</code></td>
                </tr>
              </tbody>
          </table>

          </section>


          <section class="js-section">

            <h3 class="section__title">Creating custom functions</h3>

            <p>You can create your own custom functions modifying the file <code class=micro_code>custom_actions.py</code> in <code class=micro_code>/opt/raspimote/driver/driver/lan_server/custom_fcn</code> (Linux) or <code class=micro_code>C:\Program&nbsp;Files\RaspiMote\driver\driver\lan_server\custom_fcn</code> (Windows).</p>

            <p>For example, this function will open an alert box when triggered:</p>

            <div class="code__block code__block--notabs">
              <pre class="code code--block">
                <code>
                  <violet>import</violet> pyautogui&nbsp; <green># This line imports the "pyautogui" module, useful to open dialogboxes.</green>

                  <blue>def</blue> <yellow>alert</yellow>():
                  &nbsp;&nbsp;&nbsp; pyautogui.alert(<marron>"You just made a custom function!"</marron>, <marron>"Wow!"</marron>)&nbsp; <green># This line opens an alert box.</green>
                </code>
              </pre>
            </div>

            <p>Once the above function is linked to a button, pressing the button will open this alert box:</p>

            <img src="img/pyautogui_example.png" title="The messagebox generated with the code above." alt="The messagebox generated with the code above." class="in_text_img"/>

            <p>This is, of course, a very simple (and boring) example. Much complex and interesting things can be made; your imagination is the only limit!</p>

            <p>If the function is dedicated to a GPIO button, no argument is passed. However, if the function is dedicated to an ADC device (potentiometer, joystick), the position of the knob / axis, in percents, is the only argument passed. You can add extra arguments to the function, after the required one(s), if there is any.</p>

            <p>To associate the function with a button, simply use the web-based configuration UI.</p>

            <p>For example, the following configuration, once saved, will associate the button plugged on <code class="micro_code">GPIO 13</code> with the function <code class="micro_code">alert()</code>:</p>

            <img src="img/conf_alert_example.png" title="Configuration to run the function “alert()” with “GPIO 13”." alt="Configuration to run the function “alert()” with “GPIO 13”." class="in_text_img"/>

          </section>


      </article>
    </div>
    <footer>
      <p id="footer"></p>
    </footer>

    <script src="js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="js/js.js"></script>
  </body>
</html>
